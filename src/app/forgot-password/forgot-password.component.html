<div class="forgot-container">
    <h1>Forgot Password</h1>

    <form [formGroup]="forgotForm" (ngSubmit)="updatePassword()">
        
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" formControlName="email">
            <button type="button" (click)="getOtp()">Get OTP</button>
            <div *ngIf="forgotForm.get('email')?.invalid && forgotForm.get('email')?.touched" class="error">
                Enter a valid email
            </div>
            <div *ngIf="errorMessage" class="error">
                {{ errorMessage }}
            </div>
        </div>

        <div *ngIf="otpSent" class="form-group">
            <label for="otp">Enter OTP:</label>
            <input type="text" id="otp" formControlName="otp">
            <button type="button" (click)="verifyOtp()">Verify OTP</button>
            <div *ngIf="errorMessage" class="error">
                {{ errorMessage }}
            </div>
        </div>

        <div *ngIf="otpVerified">
            <div class="form-group">
                <label for="password">New Password:</label>
                <input type="password" id="password" formControlName="password">
                <div *ngIf="forgotForm.get('password')?.invalid && forgotForm.get('password')?.touched" class="error">
                    Password must be at least 6 characters
                </div>
            </div>

            <div class="form-group">
                <label for="cnfpassword">Confirm Password:</label>
                <input type="password" id="cnfpassword" formControlName="cnfpassword">
                <div *ngIf="forgotForm.get('cnfpassword')?.invalid && forgotForm.get('cnfpassword')?.touched" class="error">
                    Passwords do not match
                </div>
            </div>

            <button type="submit" [disabled]="forgotForm.invalid">Update Password</button>
        </div>
    </form>
</div>
